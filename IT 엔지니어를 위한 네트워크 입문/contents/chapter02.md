# 2장. 네트워크 연결과 구성 요소

인터넷이 대중화된 이후 대부분의 기술이 **이더넷 - TCP/IP** 기반으로 기술이 점점 단순화되고 있지만, 아직도 용도와 필요한 네트워크 속도에 따라 다양한 기술요소들이 사용되고 있다.

## 1. 네트워크 연결 구분

네트워크는 규모와 관리 범위에 따라 LAN, MAN, WAN 3가지로 구분된다.

- **LAN(Local Area Network)**: 사용자 내부 네트워크
- **MAN(Metro Area Network)**: 한 도시 정도를 연결하고 관리하는 네트워크
- **WAN(Wide Area Network)**: 멀리 떨어진 LAN을 연결해주는 네트워크

![](https://images.velog.io/images/songs4805/post/e4c71209-4e52-4c10-8cb8-7e65c8e45ea0/image.png)

### LAN(Local Area Network)

- 홈 네트워크용과 사무실용 네트워크처럼 비교적 소규모의 네트워크를 말한다.
- 먼 거리를 통신할 필요가 없어 **스위치** 같이 간단한 장비로 연결된 네트워크
- 현재는 대부분 이더넷 기반 전송 기술을 사용한다.
- 관리 범위에서의 LAN은 자신이 소유한 건물이나 대지에 직접 구축한 선로로 동작시키는 네트워크로 정의 할 수 있다.
- 복잡하거나 대규모라도 직접 구축한 네트워크 범위라면 LAN이라 부른다.

![](https://images.velog.io/images/songs4805/post/f2a906d9-17c9-4521-ba03-a334b39bf30f/image.png)

### WAN(Wide Area Network)

- 먼 거리에 있는 네트워크를 연결하기 위해 사용한다.
- 멀리 떨어진 LAN을 서로 연결하거나 인터넷에 접속하기 위한 네트워크
- 직접 구축할 수 없는 범위의 네트워크이므로 대부분 통신사업자(KT, SKB, LGU+)로부터 회선을 임대해 사용한다.
- 원격으로 자신의 대지 및 건물이 아닌 곳을 통신해야 할 때 사용하며 비용이 부과된다.
- WAN은 원격지 연결을 위해 통신사업자로부터 빌려 쓰는 네트워크다.

![](https://images.velog.io/images/songs4805/post/73849ecd-410a-4ee5-99a1-719043ef237a/image.png)

## 2. 네트워크 회선

현재는 LAN, WAN 모두 이더넷이 주로 사용되고 있다.

### 인터넷 회선

- 인터넷 접속을 위해 통신사업자와 연결하는 회선
- 통신사업자가 판매하는 인터넷과 연결된 회선을 사용해야 인터넷 접속이 가능하다.
- 일반가정에서 사용하는 인터넷 연결 기술은 인터넷 전용 회선과는 다르다.
  - 전송 선로 공유 기술을 사용함. (아파트 광랜은 통신사업자와 아파트로 연결된 회선을 아파트내의 가입자들이 공유하는 구조이다.)
  - 선로를 공유하기 때문에 전용 회선과 달리 속도를 보장하지 않는다.
- 일반 인터넷 회선의 종류는 다음과 같다.
  - 광랜(이더넷): 기가 ~ 100Mbps
  - FTTH: 기가 ~ 100Mbps
  - 동축 케이블 인터넷: 수백 ~ 수십 Mbps
  - xDSL(ADSL, VDSL 등): 수십 ~ 수 Mbps

위의 인터넷 접속 기술은 기존 전화선을 사용하거나 특정 구간부터 다른 사용자와 공유된다.  
항상 모든 사람이 최대 속도로 인터넷을 접속하는 것은 아니므로 공유 구간은 사용자 최대 속도를 보장하지 않도록 구축하는 것이 일반적이다.

### 전용 회선

![](https://images.velog.io/images/songs4805/post/6183147a-3598-4c61-8e88-8412d3a12f58/image.png)

- 가입자와 통신사업자 간에 대역폭을 보장해주는 서비스를 대부분 전용 회선이라 한다.
- 가입자와 통신사업자 간에는 전용 케이블로 연결되어 있다.
- 통신사업자 내부에서 TDM(시분할 다중화: Time Division Multiplexing) 같은 기술로 통신 품질을 보장한다.

**음성 전송 기술 기반**

- 64kbps 단위로 구분되어 사용된다. 작은 기본 단위를 묶어 회선 접속 속도를 높이는 방법으로 오랫동안 사용되었다.
- 속도보단 높은 신뢰성이 필요할 때 사용된다.
- 이더넷 기반 광 전송 기술이 발전하면서 신뢰도가 높아져 사용 빈도가 줄고 있다.
- 결재 승인과 같은 전문(Clear Text) 전송을 위한 VAN(Value Added Network)
  사나 대외 연결에는 저속 회선을 사용하는 경우가 많다.
- 이 기술을 사용하려면 원격지 전송 기술로 변환할 수 있는 라우터가 필요하다.

**고속: 메트로 이더넷**

- 대부분 광케이블 기반의 이더넷을 사용한다.
- 가입자와 통신사업자 간의 접속 기술은 이더넷을 사용한다.
- 통신사업자 내부에서는 개별 가입자를 묶어 통신할 수 있는 다른 고속 통신 기술을 사용한다.
- 통신 기법이 서로 다른 이유는 다음과 같다.
  - 통신 사업자는 가입자들을 구분하고 가입자 트래픽을 고속으로 전송해야 하기 때문
  - 가입자들의 접속 기술을 하나로 통합하기 위한 기술이 사용된다. (저속 통신 회선, 이더넷, 음성을 하나의 회선에 실을 수 있도록 통합)

**LLCF(Link Loss Carry Forward)**?

![](https://images.velog.io/images/songs4805/post/6da6c24d-33da-4e03-b7a9-f246786c725a/image.png)

> 한 쪽 링크가 다운되면 이를 감지해 반대쪽 링크도 다운시키는 기능.
>
> 전용 회선을 이더넷으로 구성할 때 회선사에서 LLCF를 설정하지 않으면 한 사이트에서 다운되더라도 반대쪽 사이트에서는 회선이 그대로 살아있는 것 처럼 보이므로 반드시 회선 개통 후 회선사에서 LLCF 설정이 되어 있는지 확인해야 한다.
>
> 그러나 저속 회선은 2계층 프로토콜 통신 상태를 확인하는 기능이 있기에 라우터에서 상대방 링크가 끊기면, 감지할 수 있어 설정이 별도로 필요 없다.

### 인터넷 전용 회선

- 인터넷 연결 회선에 대한 통신 대역폭을 보장해주는 상품
- 가입자가 통신사업자와 연결되고 이 연결이 다시 인터넷과 연결되는 구조

![](https://images.velog.io/images/songs4805/post/6af02689-602c-4b77-8e42-8003b2787428/image.png)

- 다른 가입자와 경쟁하지 않고 통신사업자와 가입자 간의 연결 품질을 보장해준다.
- 인터넷 전용 회선과 일반가정 가입자들이 사용하는 네트워크 기술이 최근 대부분 광 접속 기술을 사용하므로 구분하기 어렵다.
- 이더넷이 가장 많이 쓰인다.  
  → 메트로 이더넷 기술은 수~수십km 까지 전송이 가능한 최근의 이더넷 기술을 바탕으로 한다.

### VPN(Virtual Private Network)

- 물리적으로는 전용선이 아니지만 가상으로 직접 연결한 것 같은 효과가 나도록 만들어주는 네트워크 기술
- 다양한 VPN 기술이 있고 가입자, 통신사업자 각각의 입장에서의 기술이 별도로 발전해왔다.

**통신 사업자 VPN**  
전용선은 연결 거리가 늘어날수록 비용이 증가한다. 도시 내의 전용선 연결보다 타도시나 해외 연결 전용선 비용은 매우 비싸다. 전용선은 사용 가능한 대역폭을 보장해주지만 가입자가 항상 100% 사용하는 것이 아니라 낭비되는 비용이 클 수 있다. 이런 비용 낭비를 줄이고자 통신사업자가 직접 가입자를 구분할 수 있는 VPN 기술을 사용해 비용을 낮추고 있다. 대표적으로 MPLS VPN이 있다.

![](https://images.velog.io/images/songs4805/post/edafb9c0-f6e0-4610-a664-d1ebb3cfd458/image.png)

MPLS VPN 기술을 이용하면 여러 가입자가 하나의 망에 접속해 통신하므로 공용 회선을 함께 이용하게 되어 비용이 낮아진다.

전용 회선 비용은 거리와 속도의 영향을 받지만 MPLS VPN 회선은 거리보다 속도의 영향을 받으므로 거리가 멀어질수록 MPLS와 같은 공용망 기술 사용이 비용을 낮추는 데 도움이 된다. 도시 내부의 통신 외에 본사-지사 또는 지사-지사 간의 연결은 대부분 MPLS VPN 기술을 사용해 연결한다. 가입자 입장에선 일반 전용선 연결과 동일한 접속 기술을 사용하면 된다.

**가입자 VPN**  
일반 인터넷망을 이용해 사용자가 직접 가상 전용 네트워크를 구성할 수 있다.  
여러 방식들이 대부분 비용적으로 높기 때문에 비용을 더 낮추기 위해 일반 인터넷 연결을 이용한 VPN을 사용한다.

![](https://images.velog.io/images/songs4805/post/263c7f99-6f4d-40f8-9d23-5d5749c3f87d/image.png)

### DWDM(Dense Wavelength Division Multiplex: 파장 분할 다중화)

- 먼 거리를 통신할 때 케이블 포설 비용 및 관리가 어려운 문제를 극복하기 위해 개발됨
- WDM 기술이 나오기 전에는 하나의 광케이블에 하나의 통신만 가능했다.
- WDM과 DWMD 기술은 하나의 광케이블에 다른 파장의 빛을 통해 여러 채널을 만드는 동시에 많은 데이터를 전송할 수 있다.

![](https://images.velog.io/images/songs4805/post/c7bde62c-b050-4640-8f61-0d831b60fa3e/image.png)

- DWMD 전송 기술은 기존 WMD보다 더 많은 채널을 이용하는 기술이다.
- 기가 인터넷은 FTTH(Fibre TO The Home)가 사용되고 구축 방식에 따라 다음과 같이 구분한다.
  - PTP(Point-to-Point): 가입자와 통신사업자 간에 케이블을 직접 포설
  - AON(Active Optical Network): 광신호 분리장비에 전기가 필요한 스위치와 같은 장비가 사용됨
  - PON: 전기 인입 없이 광신호를 분리해 가입자와 통신사업자 간의 케이블을 줄일 수 있다. 이 경우, 가입자들이 하나의 회선을 공유하므로 인터넷 속도가 느려질 수 있어 DWMD 기술을 접목한다. 사용자가 광회선을 공유하더라도 가입자마다 별도 채널을 이용해 구분하므로 인터넷 접속 속도를 유지할 수 있다.

## 3. 네트워크 구성 요소

### 네트워크 인터페이스 카드(NIC)

- 보통 랜 카드라고 부르는 부품이다.
- **컴퓨터를 네트워크에 연결하기 위한 하드웨어 장치이다.**
- NIC가 온보드 형태로 기본 장착되는 경우가 많아지고, 서버 보드 역시 10GT NIC가 기본 장착되는 추세라 별도로 장착하는 빈도는 점점 줄고 있다.

**역할**

- 직렬화(Serialization): 전기적 신호와 데이터 신호 형태간의 상호 변환 작업을 할 수 있으며 이런 작업을 직렬화라고 함.
- MAC 주소: NIC는 MAC 주소를 가지고 있으며, 전송 받은 패킷의 도착점 주소를 자신의 NIC와 비교하여 다음 처리를 한다.
- 흐름 제어(Flow Control): 패킷 기반 네트워크에서는 다양한 통신이 하나의 채널을 이용하므로 이미 통신 중인 데이터 처리 때문에 새로운 데이터를 받지 못할 수 있는데, 이 경우 발생할 수 있는 데이터 유실을 방지하기 위해 상대방에게 통신 중지를 요청할 수 있으며 이런 작업을 흐름 제어라고 함.

### 케이블과 커넥터

// 이 챕터는 책을 통해 가볍게 훑고 가도록 하자. (따로 정리하지 않을 예정)

- 이더넷 네트워크 표준

이더넷 표준 명칭의 의미는 다음과 같다.

![](https://images.velog.io/images/songs4805/post/1b900f0f-df14-4b5e-8ceb-ac711908aa6f/image.png)

- 케이블, 커넥터 구조 및 종류

### 허브

- 케이블과 동일한 1계층에서 동작하는 장비
- 거리에 반비례하는 전기 신호를 재생성해준다.
- 다수의 장비를 연결할 목적으로 사용된다.
- 단순히 들어온 신호를 모든 포트로 내보낸다.
- 모든 단말이 경쟁하게 되어 전체 네트워크 성능은 떨어진다.
- 패킷이 무한 순환해 네트워크 전체를 마비시키는 루프와 같은 다양한 장애의 원인이 되어 현재 거의 사용되지 않는다.

### 스위치

- 허브와 동일하게 다수의 장비를 연결하고 통신을 중재하는 2계층 장비이다.
- 내부 동작 방식은 다르지만, 다수의 장비 연결 및 케이블을 한 곳으로 집중해주는 역할은 동일하기에 '허브'라는 용어를 공통적으로 사용함.
- 스위치는 허브의 역할과 통신 중재라는 2가지 역할을 모두 포함하기에 **스위칭 허브**라고도 한다.
- 스위치는 MAC 주소를 이해할 수 있어 목적지 MAC 주소의 위치를 파악하고 목적지가 연결된 포트로만 전기 신호를 보낸다.

![](https://images.velog.io/images/songs4805/post/1dddbbeb-c351-476e-a20b-dd4910ce2863/image.png)

허브는 모든 포트로 전기 신호를 보내고 스위치는 목적지 주소를 인지해 정확한 목적지로만 전기 신호를 보낸다.

- 과거 효율이 낮고 네트워크 응답 성능을 보장할 수 없었던 이더넷 네트워크가 스위치로 인해 효율 및 응답 성능을 보장할 수 있게 되었다.

### 라우터

- OSI 7계층 중에서 3계층에서 동작하면서 먼 거리로 통신할 수 있는 프로토콜로 변환한다.
- 원격지로 쓸데없는 패킷이 전송되지 않도록 브로드캐스트와 멀티캐스트를 컨트롤한다.
- 불분명한 주소로 통신을 시도할 경우, 해당 패킷을 버린다.
- 정확한 방향으로 패킷이 전송되도록 경로를 지정하고 최적의 경로로 패킷을 포워딩한다.

![](https://images.velog.io/images/songs4805/post/da199d9e-8244-4477-b28b-5da02e9ae5d5/image.png)

- 일반 사용자 입장에서 라우터를 접하기는 어렵지만, L3 스위치와 공유기가 라우터와 유사한 역할을 한다.

### 로드 밸런서

![](https://images.velog.io/images/songs4805/post/97416d5a-b231-4fc6-b92c-29103b6d89b9/image.png)

- OSI 7계층 중 4계층에서 동작한다.
- 애플리케이션 계층에서 애플리케이션 프로토콜의 특징을 이해하고 동작하는 7계층 로드밸런서를 별도로 **ADC(Application Delivery Controller)** 라고도 부른다.
- L4 스위치도 로드밸런서의 한 종류: 스위치처럼 다수의 포트를 가지고 있으면서 로드 밸런서 역할을 하는 장비
- 4계층 포트 주소를 확인하는 동시에 IP 주소를 변경할 수 있다.
- 웹 서비스에서 가장 많이 사용된다.  
  → 웹 서버를 증설하고 싶을 때 로드 밸런서를 웹 서버 앞에 두고 웹 서버를 여러 대로 늘려준다. 대표 IP는 로드 밸런서가 갖고 로드 밸런서가 각 웹 서버로 패킷의 목적지 IP 주소를 변경해 보내준다. 이런 원리를 이용해 여러 대의 웹 서버가 동시에 동작해 서비스 성능을 높여주는 동시에 빠른 장애 대응 및 복구를 도와준다.
- 서비스 헬스 체크 기능이나 대용량 세션 처리 기능도 수행한다.

### 보안 장비(방화벽/IPS)

- 정보를 잘 제어하고 공격을 방어하는데 초점이 맞춰져 있다.
- 방어 목적 및 보안 장비가 설치되는 위치에 맞춰 다양한 보안 장비가 사용됨.
- 방화벽은 OSI 7계층 중 4계층에서 동작하며 방화벽을 통과하는 패킷의 3,4 계층 정보를 확인 후 패킷을 정채고가 비교해 버리거나 포워딩한다.

### 기타(모뎀/공유기 등)

- 일반 가정집이나 작은 회사에서 사용하는 공유기를 의미
- 2계층 스위치, 3계층 라우터, 4계층 NAT와 간단한 방화벽 기능을 한 곳에 모아놓은 장비
- 겉으로는 하나의 간단한 장비처럼 보이나 스위치, 무선AP, 라우터 부분 등으로 구분되는 복잡한 장비이다.
- 모뎀은 단거리와 장거리를 통신에 사용되는 기술이 각기 달라 이 기술들을 변환해주는 장비이다.
- 공유기의 LAN, WAN 포트는 일반 이더넷이기에 100m 이상 장거리 데이터 전송을 할 수 없어 장거리 통신이 가능한 기술로 변환해주는 모뎀이 필요하다.
