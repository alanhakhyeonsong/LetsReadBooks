# Chapter 14 - 효율향상전략
## 가상화 기술
가상화 기술의 목적을 정리하자면 다음과 같다.

- 확장성
  - 오버헤드의 최소화
- 비용대비 성능
  - 리소스 사용률 향상
  - 운용의 유연함(환경의 단순화)
- 고가용성
  - 환경의 격리

가상화 기술을 사용함으로써 실제로 다음과 같은 효용을 얻고 있다.

- IPMI를 대체하는 하이퍼바이저
- 하드웨어 간 차이 흡수(→ 환경 추상화)
- 준 가상화 사용
- 리소스 소비 제어
  - 과부하 경고
  - 부하 조정

가상화 기술을 도입하는 가장 기본적인 목적은 하드웨어의 이용효율 향상이다. 하드웨어의 이용효율 향상을 위해 남아있는 리소스를 사용하는 게스트 OS를 투입한다.

- CPU가 남아있다 → 웹 서버
- I/O가 남아있다 → 캐시 서버

리소스 소비경향이 비슷하고 부하가 높은 용도의 게스트 OS끼리는 리소스를 서로 점유하려고 하므로 같이 두는 것은 피하도록 하고 있다. 또한 중앙에 신뢰성이 높은 큰 규모의 스토리지를 두고 네트워크로 파일시스템을 마운트하는 구성을 채택하는 경우도 일반적으론 많지만, 이런 형태는 사용하지 않는다. 고가의 스토리지 서버를 사용하지 않으면 충분한 안정성을 확보할 수 없기 때문이다.

![](https://github.com/alanhakhyeonsong/LetsReadBooks/assets/60968342/6a9f0320-cfda-4612-9008-75ca0cbaf4f2)

![](https://github.com/alanhakhyeonsong/LetsReadBooks/assets/60968342/35cbf0d6-16c7-4329-aaa1-aac066e4ac98)

가상화로 얻은 장점을 정리하면 다음과 같다.

- 물리적인 리소스 제약에서 해방
  - 리소스를 동적으로 변경
  - VM의 마이그레이션, 복제
- 용이한 서버 증설, 더 나은 확장성 확보
- 소프트웨어 레벨의 강력한 호스트 제어
  - 비정상 동작 시 문제 국소화
  - 호스트 제어가 용이해진다.
- 하드웨어 운용 비용 저하
- 비용 대비 성능 향상, 고가용성으로 발전

가상화 도입 시 주의할 점은 다음과 같다.

- 전형적인 단점으론 성능상의 오버헤드가 있다는 점이다.
  - CPU에서 2~3%
  - 메모리 성능에서 1할 정도
  - 네트워크 성능은 절반 정도
  - I/O 성능이 5% 정도 떨어진다.
- 가상화 기술 구현상 결함으로 인해 갑자기 네트워크가 단절되는 등의 불안정 요인이 약간 늘어나는 경우가 있지만, 장점이 충분히 크므로 가상화 기술을 사용한다.
  - 용도에 따라선 꽤 심각한 문제긴 하다.

## 하드웨어와 효율향상
- 메모리, HDD가 급속히 저렴해지고 있다.

저가 하드웨어의 유용한 이용 방침
- 최소한의 관리 기능
- 많은 core CPU
- 대량의 메모리
- flexible한 I/O 성능
  - Diskless
  - 하드웨어 RAID-10
  - SSD RAID-0
- 관리용 하드콘솔 불필요
  - IPMI 기능

SSD는 보통 다수의 DB 슬레이브 서버에서 사용하고 있다.

- 양호한 랜덤 액세스 성능
- 메모리 > SSD > HDD RAID-0/10 > HDD RAID-1
  - 메모리 정도는 아니지만 충분히 빠르다