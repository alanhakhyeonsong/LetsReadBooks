# 고부하로 확장
여러 장비 간 분산된 데이터베이스를 필요로 하는 이유는 여러 가지다.

- 확장성: 데이터 볼륨, 읽기 부하, 쓰기 부하가 단일 장비에서 다룰 수 있는 양보다 커지면 부하를 여러 장비로 분배할 수 있다.
- 내결함성/고가용성: 장비 하나가 죽더라도 애플리케이션이 계속 동작해야 한다면 여러 장비를 사용해 중복성을 제공할 수 있다. 장비 하나가 실패하면 다른 하나가 이어받는다.
- 지연 시간: 전 세계에 사용자가 있다면 사용자와 지리적으로 가까운 곳의 데이터센터에서 서비스를 제공하기 위해 전 세계 다양한 곳에 서버를 두고 싶을 것이다. 이를 통해 사용자는 네트워크 패킷이 지구를 반 바퀴 돌아서 올 때까지 기다릴 필요가 없다.

고부하 확장이 필요하다면 **더 강력한 장비를 구매하는 것이 가장 간단한 방법이다.** (수직 확장, 용량 확장)  
많은 CPU, 메모리 칩, 디스크를 하나의 OS로 함께 결합할 수 있다. 그래서 빠른 상호 연결로 모든 CPU가 메모리나 디스크의 모든 부분에 접근할 수 있다. 이런 종류의 **공유 메모리 아키텍처에선 모든 구성 요소를 단일 장비처럼 다룰 수 있다.** 하지만 비용이 선형적인 추세보다 훨씬 빠르게 증가한다는 문제점이 있다. 또한 제한적인 내결함성을 제공한다.

## 비공유 아키텍처
반면 비공유 아키텍처(수평 확장, 규모 확장)에선 **데이터베이스 소프트웨어를 수행하는 각 장비나 가상 장비를 노드라고 부른다.** 각 노드는 CPU, RAM, 디스크를 독립적으로 사용한다. 노드 간 코디네이션은 일반적인 네트워크를 사용해 소프트웨어 수준에서 수행한다.

**비공유 시스템은 특별한 하드웨어를 필요로 하지 않으므로 가격 대비 성능이 가장 좋은 시스템을 사용할 수 있다.** 잠재적으로 여러 지리적인 영역에 걸쳐 데이터를 분산해 사용자 지연 시간을 줄이고 전체 데이터센터의 손실을 줄일 수 있다. 가상 장비의 클라우드 배포를 활용하면 구글 규모로 운영할 필요가 없다.

## 복제 대 파티셔닝
여러 노드에 데이터를 분산하는 방법은 일반적으로 두 가지가 있다.

- 복제: 같은 데이터의 복사본을 잠재적으로 다른 위치에 있는 여러 노드에 유지한다. 복제는 중복성을 제공한다. 일부 노드가 사용 불가능 상태라면 해당 데이터는 남은 다른 노드를 통해 여전히 제공할 수 있다. 또한 복제는 성능 향상에도 도움이 된다.
- 파티셔닝: 큰 데이터베이스를 파티션이라는 작은 서브셋으로 나누고 각 파티션은 각기 다른 노드에 할당한다.(샤딩이라고도 함)

![image](https://github.com/alanhakhyeonsong/LetsReadBooks/assets/60968342/b0028dae-7f54-407d-850d-1bfa4fb0dc90)