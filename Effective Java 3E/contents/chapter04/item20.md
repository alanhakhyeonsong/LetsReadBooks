# μ•„μ΄ν… 20. μ¶”μƒ ν΄λμ¤λ³΄λ‹¤λ” μΈν„°νμ΄μ¤λ¥Ό μ°μ„ ν•λΌ

## λ‹¤μ¤‘ κµ¬ν„ λ©”μ»¤λ‹μ¦

μλ°”κ°€ μ κ³µν•λ” λ‹¤μ¤‘ κµ¬ν„ λ©”μ»¤λ‹μ¦μ€ **μΈν„°νμ΄μ¤**μ™€ **μ¶”μƒ ν΄λμ¤**μ΄λ‹¤. Java 8λ¶€ν„° μΈν„°νμ΄μ¤λ„ λ””ν΄νΈ λ©”μ„λ“(default method)λ¥Ό μ κ³µν•  μ μμ–΄ λ‘ λ©”μ»¤λ‹μ¦ λ¨λ‘ μΈμ¤ν„΄μ¤ λ©”μ„λ“λ¥Ό κµ¬ν„ ν•νƒλ΅ μ κ³µν•  μ μλ‹¤.

## μΈν„°νμ΄μ¤μ™€ μ¶”μƒ ν΄λμ¤μ μ°¨μ΄μ 

- μ¶”μƒ ν΄λμ¤κ°€ μ •μν• νƒ€μ…μ„ κµ¬ν„ν•λ” ν΄λμ¤λ” λ°λ“μ‹ μ¶”μƒ ν΄λμ¤μ ν•μ„ ν΄λμ¤κ°€ λμ–΄μ•Ό ν•λ‹¤.
- μλ°”λ” λ‹¨μΌ μƒμ†λ§ μ§€μ›ν•λ―€λ΅, μ¶”μƒ ν΄λμ¤ λ°©μ‹μ€ μƒλ΅μ΄ νƒ€μ…μ„ μ •μν•λ” λ° ν° μ μ•½μ΄ μλ‹¤.
- μΈν„°νμ΄μ¤κ°€ μ„ μ–Έν• λ©”μ„λ“λ¥Ό λ¨λ‘ μ •μν•κ³  κ·Έ μΌλ° κ·μ•½μ„ μ μ§€ν‚¨ ν΄λμ¤λΌλ©΄ λ‹¤λ¥Έ μ–΄λ–¤ ν΄λμ¤λ¥Ό μƒμ†ν–λ“  κ°™μ€ νƒ€μ…μΌλ΅ μ·¨κΈ‰λλ‹¤.
- κΈ°μ΅΄ ν΄λμ¤μ—λ„ μ†μ‰½κ² μƒλ΅μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄λ„£μ„ μ μλ‹¤.
  - μ”κµ¬ν•λ” λ©”μ„λ“λ¥Ό μ¶”κ°€ν•κ³ , ν΄λμ¤ μ„ μ–Έμ— `implements`λ§ μ¶”κ°€ν•λ©΄ λλ‹¤.
  - μλ°” ν”λ«νΌ λ‚΄μ `Comparable`, `Iterable`, `AutoCloseable`κ°€ μμ‹μ΄λ‹¤.
- κΈ°μ΅΄ ν΄λμ¤ μ„μ— μƒλ΅μ΄ μ¶”μƒ ν΄λμ¤λ¥Ό λΌμ›λ„£κΈ°λ” μ–΄λ ¤μ΄κ² μΌλ°μ μ΄λ‹¤.

λ‘ ν΄λμ¤κ°€ κ°™μ€ μ¶”μƒ ν΄λμ¤λ¥Ό ν™•μ¥ν•κΈΈ μ›ν•λ‹¤λ©΄, κ·Έ μ¶”μƒ ν΄λμ¤λ” κ³„μΈµκµ¬μ΅°μƒ λ‘ ν΄λμ¤μ κ³µν†µ μ΅°μƒμ΄μ–΄μ•Ό ν•λ‹¤. ν•μ§€λ§, μ΄ λ°©μ‹μ€ ν΄λμ¤ κ³„μΈµκµ¬μ΅°μ— μ»¤λ‹¤λ€ νΌλ€μ„ μΌμΌν‚¨λ‹¤.

## μΈν„°νμ΄μ¤λ” λ―Ήμ¤μΈ(mixin) μ •μμ— μ•μ„±λ§μ¶¤μ΄λ‹¤.

λ―Ήμ¤μΈμ΄λ€, ν΄λμ¤κ°€ κµ¬ν„ν•  μ μλ” νƒ€μ…μΌλ΅ λ―Ήμ¤μΈμ„ κµ¬ν„ν• ν΄λμ¤μ— μ›λμ 'μ£Όλ νƒ€μ…' μ™Έμ—λ„ νΉμ • μ„ νƒμ  ν–‰μ„λ¥Ό μ κ³µν•λ‹¤κ³  μ„ μ–Έν•λ” ν¨κ³Όλ¥Ό μ¤€λ‹¤.

`Comparable`μ€ μμ‹ μ„ κµ¬ν„ν• ν΄λμ¤μ μΈμ¤ν„΄μ¤λ“¤ λΌλ¦¬λ” μμ„λ¥Ό μ •ν•  μ μλ‹¤κ³  μ„ μ–Έν•λ” λ―Ήμ¤μΈ μΈν„°νμ΄μ¤μ λ€ν‘μ μΈ μ‚¬λ΅€μ΄λ‹¤.

**λ€μƒ νƒ€μ…μ μ£Όλ κΈ°λ¥μ— μ„ νƒμ  κΈ°λ¥μ„ 'νΌν•©(mixed in)'ν•λ‹¤κ³  ν•΄μ„ λ―Ήμ¤μΈμ΄λΌ λ¶€λ¥Έλ‹¤.**

μ¶”μƒ ν΄λμ¤λ΅λ” λ―Ήμ¤μΈμ„ μ •μν•  μ μ—†λ‹¤.  
κΈ°μ΅΄ ν΄λμ¤μ— λ§μ”μΈμ μ—†κΈ° λ•λ¬Έμ΄κ³ , ν΄λμ¤λ” λ‘ λ¶€λ¨λ¥Ό μ„¬κΈΈ μ μ—†λ” νΉμ„±μƒ κ³„μΈµ κµ¬μ΅°μ—λ” λ―Ήμ¤μΈμ„ μ‚½μ…ν•κΈ°μ— ν•©λ¦¬μ μΈ μ„μΉκ°€ μ—†λ‹¤.

## μΈν„°νμ΄μ¤λ΅λ” κ³„μΈµκµ¬μ΅°κ°€ μ—†λ” νƒ€μ… ν”„λ μ„μ›ν¬λ¥Ό λ§λ“¤ μ μλ‹¤.

νƒ€μ…μ„ κ³„μΈµμ μΌλ΅ μ •μν•λ©΄ μλ§μ€ κ°λ…μ„ κµ¬μ΅°μ μΌλ΅ μ ν‘ν„ν•  μ μμ§€λ§, ν„μ‹¤μ—μ„λ” κ³„μΈµμ„ μ—„κ²©ν κµ¬λ¶„ν•κΈ° μ–΄λ ¤μ΄ κ²½μ°λ„ μλ‹¤.

```java
public interface Singer {
    AudioClip sing(Song s);
}

public interface Songwriter {
    Song compose(int chartPosition);
}
```

μ΄λ° μμ κ°€ μλ‹¤κ³  κ°€μ •ν•μ. νƒ€μ…μ„ μΈν„°νμ΄μ¤λ΅ μ •μν•λ©΄ κ°€μ ν΄λμ¤κ°€ Singer, Songwriter λ¨λ‘λ¥Ό κµ¬ν„ν•΄λ„ λ¬Έμ κ°€ μ „ν€ μ—†λ‹¤. κ²λ‹¤κ°€ μ΄ λ¨λ‘λ¥Ό ν™•μ¥ν•κ³  μƒλ΅μ΄ λ©”μ„λ“κΉμ§€ μ¶”κ°€ν• μ 3μ μΈν„°νμ΄μ¤λ¥Ό μ •μν•  μλ„ μλ‹¤.

```java
public interface SingerSongwirter extends Singer, Songwriter {
    AudioClip strum();
    void actSensitive();
}
```

μ΄ μ •λ„μ μ μ—°μ„±μ΄ ν•­μƒ ν•„μ”ν•μ§„ μ•μ§€λ§, μ΄λ ‡κ² λ§λ“¤μ–΄λ‘” μΈν„°νμ΄μ¤κ°€ κ²°μ •μ μΈ λ„μ›€μ„ μ¤„ μλ„ μλ‹¤.  
κ°™μ€ κµ¬μ΅°λ¥Ό ν΄λμ¤λ΅ λ§λ“λ ¤λ©΄ μ΅°ν•© ν­λ°μ΄λΌλ” ν„μƒμ΄ λ°μƒν•  μ μλ‹¤.

λνΌ ν΄λμ¤ κ΄€μ©κµ¬(item 18)μ™€ ν•¨κ» μ‚¬μ©ν•λ©΄ **μΈν„°νμ΄μ¤λ” κΈ°λ¥μ„ ν–¥μƒμ‹ν‚¤λ” μ•μ „ν•κ³  κ°•λ ¥ν• μλ‹¨μ΄ λλ‹¤.** νƒ€μ…μ„ μ¶”μƒ ν΄λμ¤λ΅ μ •μν•΄λ‘λ©΄ κ·Έ νƒ€μ…μ— κΈ°λ¥μ„ μ¶”κ°€ν•λ” λ°©λ²•μ€ μƒμ†λΏμ΄λ‹¤. μƒμ†ν•΄μ„ λ§λ“  ν΄λμ¤λ” λνΌ ν΄λμ¤λ³΄λ‹¤ ν™μ©λ„κ°€ λ–¨μ–΄μ§€κ³  κΉ¨μ§€κΈ°λ” λ” μ‰½λ‹¤.

μΈν„°νμ΄μ¤μ λ©”μ„λ“ μ¤‘ κµ¬ν„ λ°©λ²•μ΄ λ…λ°±ν• κ²ƒμ΄ μλ‹¤λ©΄, κ·Έ κµ¬ν„μ„ λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•΄ ν”„λ΅κ·Έλλ¨Έλ“¤μ μΌκ°μ„ λμ–΄μ¤„ μ μλ‹¤. μ΄ λ•λ” μƒμ†ν•λ ¤λ” μ‚¬λμ„ μ„ν• μ„¤λ…μ„ `@ImplSpec` javadoc νƒκ·Έλ¥Ό λ¶™μ—¬ λ¬Έμ„ν™”ν•΄μ•Ό ν•λ‹¤.(item 19)

## ν…ν”λ¦Ώ λ©”μ„λ“ ν¨ν„΄

μΈν„°νμ΄μ¤μ™€ μ¶”μƒ κ³¨κ²© κµ¬ν„(skeletal implementation) ν΄λμ¤λ¥Ό ν•¨κ» μ κ³µν•λ” μ‹μΌλ΅ μΈν„°νμ΄μ¤μ™€ μ¶”μƒ ν΄λμ¤μ μ¥μ μ„ λ¨λ‘ μ·¨ν•λ” λ°©λ²•λ„ μλ‹¤.

1. μΈν„°νμ΄μ¤λ΅λ” νƒ€μ…μ„ μ •μν•κ³ , ν•„μ”ν•λ©΄ λ””ν΄νΈ λ©”μ„λ“ λ‡ κ°λ„ ν•¨κ» μ κ³µν•λ‹¤. : κ³¨κ²©
2. κ³¨κ²© κµ¬ν„ ν΄λμ¤λ” λ‚λ¨Έμ§€ λ©”μ„λ“λ¥Ό λ¨λ‘ κµ¬ν„ν•λ‹¤. : κ³¨κ²©μ„ κΈ°λ°μΌλ΅ ν™•μ¥

![](https://images.velog.io/images/songs4805/post/4b6a8e1b-44c0-4da9-a3f8-af6422127a6a/image.png)

`AbstractList`λ¥Ό μμ‹λ΅ λ³Ό μ μλ‹¤.

> π“ μ¶”μƒ κ³¨κ²© κµ¬ν„ ν΄λμ¤ μμ λ” λ‹¤μμ„ μ°Έκ³ ν•μ.  
> [Favor Skeletal Implementation in Java](https://dzone.com/articles/favour-skeletal-interface-in-java)

μ±…μ—μ„λ” λ‹¤μ μ½”λ“λ¥Ό μμ‹λ΅ λ³΄μ—¬μ£Όκ³  μλ‹¤.

```java
static List<Integer> intArrayAsList(int[] a) {
    Objects.requireNonNull(a);

    // λ‹¤μ΄μ•„λ¬λ“ μ—°μ‚°μλ¥Ό μ΄λ ‡κ² μ‚¬μ©ν•λ” κ²ƒμ€ Java 9 λ¶€ν„° κ°€λ¥ν•λ‹¤.
    // λ” λ‚®μ€ λ²„μ „μ„ μ‚¬μ©ν•λ‹¤λ©΄ <Integer>λ΅ μμ •ν•μ.
    return new AbstractList<>() {
        @Override public Integer get(int i) {
            return a[i]; // μ¤ν† λ°•μ‹±(item 6)
        }

        @Override public Integer set(int i, Integer val) {
            int oldVal = a[i];
            a[i] = val;  // μ¤ν† μ–Έλ°•μ‹±
            return oldVal; // μ¤ν† λ°•μ‹±
        }

        @Override public int size() {
            return a.length;
        }
    };
}
```

List κµ¬ν„μ²΄κ°€ μ κ³µν•λ” κΈ°λ¥λ“¤μ„ μƒκ°ν•λ©΄, μ΄ μ½”λ“λ” κ³¨κ²© κµ¬ν„μ νμ„ μ λ³΄μ—¬μ£Όλ” μμ‹λΌκ³  ν•λ‹¤.  
// μ΄ μμ‹λ” `int` λ°°μ—΄μ„ λ°›μ•„ `Integer` μΈμ¤ν„΄μ¤μ λ¦¬μ¤νΈ ν•νƒλ΅ λ³΄μ—¬μ£Όλ” μ–΄λ‘ν„°(Adapter)μ΄κΈ°λ„ ν•λ‹¤.

κ³¨κ²© κµ¬ν„μ€ κΈ°λ³Έμ μΌλ΅ μƒμ†ν•΄μ„ μ‚¬μ©ν•λ” κ±Έ κ°€μ •ν•λ―€λ΅ item 19μ—μ„ μ–ΈκΈ‰ν• μ„¤κ³„ λ° λ¬Έμ„ν™” μ§€μΉ¨μ„ λ¨λ‘ λ”°λΌμ•Ό ν•λ‹¤.

## ν•µμ‹¬ μ •λ¦¬

- μΌλ°μ μΌλ΅ λ‹¤μ¤‘ κµ¬ν„μ© νƒ€μ…μΌλ΅λ” μΈν„°νμ΄μ¤κ°€ κ°€μ¥ μ ν•©ν•λ‹¤.
- λ³µμ΅ν• μΈν„°νμ΄μ¤λΌλ©΄ κµ¬ν„ν•λ” μκ³ λ¥Ό λμ–΄μ£Όλ” κ³¨κ²© κµ¬ν„μ„ ν•¨κ» μ κ³µν•λ” λ°©λ²•μ„ κΌ­ κ³ λ ¤ν•΄λ³΄μ.
- κ³¨κ²© κµ¬ν„μ€ 'κ°€λ¥ν• ν•' μΈν„°νμ΄μ¤μ λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•μ—¬ κ·Έ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• λ¨λ“  κ³³μ—μ„ ν™μ©ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.
- μΈν„°νμ΄μ¤μ— κ±Έλ ¤μλ” κµ¬ν„μƒμ μ μ•½ λ•λ¬Έμ— κ³¨κ²© κµ¬ν„μ„ μ¶”μƒ ν΄λμ¤λ΅ μ κ³µν•λ” κ²½μ°κ°€ λ” ν”ν•λ‹¤.
