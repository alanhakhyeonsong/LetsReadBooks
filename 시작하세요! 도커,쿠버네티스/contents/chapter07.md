# 7장. 쿠버네티스 리소스의 관리와 설정
## 네임스페이스(Namespace): 리소스를 논리적으로 구분하는 장벽
도커나 도커 스웜 모드를 사용할 땐 컨테이너를 논리적으로 구분하는 방법이 없었다. 하지만 쿠버네티스에선 리소스를 논리적으로 구분하기 위해 **네임스페이스**라는 오브젝트를 제공한다.  
네임스페이스는 포드, 레플리카셋, 디플로이먼트, 서비스 등과 같은 쿠버네티스 리소스들이 묶여 있는 하나의 가상 공간 또는 그룹이라 이해하면 된다.

목적에 맞는 리소스들의 그룹을 네임스페이스로 묶어서 사용할 수 있고, 여러 개발 조직이 하나의 쿠버네티스 클러스터를 공유해 사용해야 한다면 조직별로 네임스페이스를 사용하도록 구성할 수도 있다. 여러 개의 네임스페이스를 사용하면 마치 하나의 클러스터에서 여러 개의 가상 클러스터를 동시에 사용하는 것처럼 느껴질 것이다.

`kubectl get namespace` 혹은 `kubectl get ns`를 통해 네임스페이스의 목록을 확인할 수 있다.

![image](https://github.com/alanhakhyeonsong/LetsReadBooks/assets/60968342/a36ba41f-8ad7-49bd-8096-e4d4703e4f78)

우리가 네임스페이스를 생성하지 않았더라도 기본적으로 3개의 네임스페이스가 존재한다. 각 네임스페이스는 논리적인 리소스 공간이기 때문에 각 네임스페이스에는 포드, 레플리카셋, 서비스와 같은 리소스가 따로 존재한다.

`default`는 쿠버네티스를 설치하면 자동으로 사용하도록 설정되는 네임스페이스로, `kubectl` 명령어로 쿠버네티스 리소스를 사용할 땐 기본적으로 `default` 네임스페이스를 사용한다. `--namespace` 옵션을 명시하지 않으면 기본적으로 `default` 네임스페이스를 사용한다.

![image](https://github.com/alanhakhyeonsong/LetsReadBooks/assets/60968342/1a228e90-aa84-4b1e-a95e-38ca63907dce)

`kube-system`이라는 네임스페이스의 포드를 확인하면 위와 같이 우리가 생성한 적 없는 포드가 여러 개 실행되고 있다. `kube-system`은 쿠버네티스 클러스터 구성에 필수적인 컴포넌트들과 설정값 등이 존재하는 네임스페이스다. `default` 네임스페이스와는 논리적으로 구분돼있다. 이 네임스페이스는 충분한 이해 없이는 건드리지 말자.

![image](https://github.com/alanhakhyeonsong/LetsReadBooks/assets/60968342/dabe1bb3-5b3e-43eb-8484-3cdb031347ee)

`kube-system` 네임스페이스에선 위처럼 쿠버네티스의 포드, 서비스 등을 이름으로 찾을 수 있도록 하는 DNS 서버의 서비스가 미리 생성돼있다. 이처럼 네임스페이스는 쿠버네티스의 리소스를 논리적으로 묶을 수 있는 가상 클러스터처럼 사용할 수 있다. 네임스페이스를 사용하는 경우는 대부분 모니터링, 로드 밸런싱 인그레스(Ingress) 등의 특정 목적을 위한 용도가 대부분일 것이다. 하지만, **각 네임스페이스의 리소스는 논리적으로만 구분된 것일 뿐, 물리적으로 격리된 것이 아니라는 점을 알아둬야 한다.**

네임스페이스는 yaml 파일에 정의해 생성할 수 있다.

```yaml
# production-namespace.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: production
```

쿠버네티스 클러스터 내부에선 서비스 이름을 통해 포드에 접근할 수 있다고 앞서 이야기 했는데, 이는 정확히 말하자면 **'같은 네임스페이스 내의 서비스'에 접근할 때에는 서비스 이름만으로 접근할 수 있다는 뜻이다.**

이전에 사용했던 임시 포드들은 `default` 네임스페이스에 생성됐기 때문에 `production` 네임스페이스의 서비스에 접근하지 못한다. 하지만 `<서비스 이름>.<네임스페이스 이름>.svc` 처럼 서비스 이름 뒤에 네임스페이스 이름을 붙이면 다른 네임스페이스의 서비스에도 접근할 수 있다.

네임스페이스를 사용하면 쿠버네티스 리소스를 사용 목적에 따라 논리적으로 격리할 순 있지만, **모든 리소스가 네임스페이스에 의해 구분되는 것은 아니다.**  
포드, 서비스, 레플리카셋, 디플로이먼트는 네임스페이스 단위로 구분할 수 있다. 이런 경우를 **쿠버네티스에선 '오브젝트가 네임스페이스에 속한다'라고 표현한다.**  
이와 반대로 네임스페이스에 속하지 않는 쿠버네티스 오브젝트도 있다. `kubectl get nodes` 명령어를 사용한 것처럼 **노드(nodes) 또한 쿠버네티스의 오브젝트 중 하나지만, 네임스페이스에 속하지 않는 대표적인 오브젝트 중 하나이다.** 이는 쿠버네티스 클러스터에서 사용되는 저수준의 오브젝트이며, 네임스페이스에 의해 구분되지 않는다.

## 컨피그맵(Configmap), 시크릿(Secret): 설정값을 포드에 전달